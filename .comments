function removeElements() {
  let table = document.getElementById("table1");
  let rows = document.querySelectorAll("tr");
  let grandTotal = document.getElementById("grandTotal");
  rows.forEach((element, i) => {
    if (i == 0) {
    } else {
      element.remove();
    }
  });
  grandTotal.remove();
}

removeElements();

// const itemList = [
//   {
//     name: "Apple",
//     unit: 2,
//     pricePerUnit: 120,
//     total: 240,
//   },
//   {
//     name: "Orange",
//     unit: 3,
//     pricePerUnit: 50,
//     total: 150,
//   },
// ];

function displayData() {
  let rows = itemList.map((item) => {
    let tr = document.createElement("tr");

    let td1 = document.createElement("td");
    let td2 = document.createElement("td");
    let td3 = document.createElement("td");
    let td4 = document.createElement("td");

    td1.textContent = item.name;
    td2.textContent = item.unit;
    td3.textContent = item.pricePerUnit;
    td4.textContent = item.total;

    td1.contentEditable = true;

    tr.appendChild(td1);
    tr.appendChild(td2);
    tr.appendChild(td3);
    tr.appendChild(td4);

    return tr;
  });

  let table = document.getElementById("table1");
  let tbody = document.querySelector("tbody");

  rows.forEach((row) => {
    tbody.appendChild(row);
  });

  table.appendChild(tbody);
  let grandTotal = itemList.reduce((grandTotalAccumulater, item) => {
    return grandTotalAccumulater + item.total;
  }, 0);

  let grandTotalSpan = document.createElement("span");
  grandTotalSpan.setAttribute("id", "grandTotal");
  grandTotalSpan.textContent = "Grand Total:- " + grandTotal;
  table.insertAdjacentElement("afterend", grandTotalSpan);
}
displayData();

function getCounter(x) {
  return function () {
    return (x += 1);
  };
}

const counter = getCounter(0);

document.getElementById("form1").addEventListener("submit", addItem);

function addItem(e) {
  e.preventDefault();
  let { itemName, units, price } = e.target.elements;
  itemName = itemName.value;
  units = units.value;
  price = price.value;
  let total = units * price;
  if (typeof localStorage !== "undefined") {
    let item = {
      id: counter(),
      name: itemName,
      unit: units,
      pricePerUnit: price,
      total: total,
    };

    localStorage(`${item.id}`, item);
    localStorage("itemCount", item.id);
  } else {
    alert("Your browser don't support local storage.");
  }
  // itemList.push();

  removeElements();
  displayData();
  return false;
}





*******************************************************
function displayData() {
  if (typeof localStorage !== "undefined") {
    let rows = [];
    let grandTotal = 0;
    for (let i = 1; i <= localStorage.length; i++) {
      let item = JSON.parse(localStorage["" + i]);
      let tr = document.createElement("tr");
      let td1 = document.createElement("td");
      let td2 = document.createElement("td");
      let td3 = document.createElement("td");
      let td4 = document.createElement("td");
      let td5 = document.createElement("td");
      let td6 = document.createElement("td");
      let td7 = document.createElement("td"); //For Storing id Of Id;

      td1.textContent = item.name;
      td2.textContent = item.unit;
      td3.textContent = item.pricePerUnit;
      td4.textContent = item.total;
      let editBtn = document.createElement("button");
      editBtn.textContent = "Edit";
      editBtn.addEventListener("click", editBtnClickHandler);

      let deleteBtn = document.createElement("button");
      deleteBtn.textContent = "X";
      deleteBtn.addEventListener("click", deleteBtnClickHandler);

      td5.appendChild(editBtn);
      td6.appendChild(deleteBtn);
      td7.textContent = item.id;
      td7.style.display = "none";

      grandTotal += item.total;

      td1.contentEditable = true;

      tr.appendChild(td1);
      tr.appendChild(td2);
      tr.appendChild(td3);
      tr.appendChild(td4);
      tr.appendChild(td5);
      tr.appendChild(td6);
      tr.appendChild(td7);

      rows.push(tr);
    }

    let table = document.getElementById("table1");
    let tbody = document.querySelector("tbody");

    rows.forEach((row) => {
      tbody.appendChild(row);
    });

    let tr = document.createElement("tr");
    let td1 = document.createElement("td");
    let td2 = document.createElement("td");
    td1.setAttribute("colspan", 3);
    td1.style.textAlign = "right";
    td1.style.fontWeight = 900;
    td1.style.paddingRight = "20px";
    td1.textContent = "Grand Total:-";

    td2.style.textAlign = "center";
    td2.textContent = grandTotal;
    td2.id = "grandTotal";

    tr.appendChild(td1);
    tr.appendChild(td2);

    tbody.appendChild(tr);

    table.appendChild(tbody);
  } else {
    alert(
      "There is no items in your local storage. Your browser don't support local storage."
    );
  }
}
